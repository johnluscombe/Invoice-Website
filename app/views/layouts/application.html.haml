!!!
%html
  %head
    %title Luscombe & Associates
    = stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true
    = javascript_include_tag 'application', 'data-turbolinks-track' => true
    = csrf_meta_tags
  %body
    %nav.navbar.navbar-default.navbar-inverse
      .navbar-header
        %button.navbar-toggle.collapsed{ :type => 'button', 'data-toggle' => 'collapse', 'data-target' => '#bs-example-navbar-collapse-1', 'aria-expanded' => 'false' }
          %span.sr-only Toggle navigation
          %span.icon-bar
          %span.icon-bar
          %span.icon-bar
        - if current_user != nil and current_user.profile >= 2
          = link_to image_tag('logo.png', :class => 'brand'), users_path, :class => 'navbar-brand'
        - elsif current_user
          = link_to image_tag('logo.png', :class => 'brand'), user_invoices_path(current_user), :class => 'navbar-brand'
        - else
          = link_to image_tag('logo.png', :class => 'brand'), root_path, :class => 'navbar-brand'
      .collapse.navbar-collapse#bs-example-navbar-collapse-1
        %ul.nav.navbar-nav
          - if current_user != nil and current_user.profile >= 2
            %li= link_to 'Users', users_path
            - if current_user.profile == 3
              %li= link_to 'All Invoices', invoices_path(:all => true)
            %li= link_to 'Pending Invoices', invoices_path(:pending_only => true)
          - elsif current_user
            %li= link_to 'Invoices', user_invoices_path(current_user)
            - if Invoice.where(:user_id => current_user.id).count > 0
              - if Invoice.where(:user_id => current_user.id).where(status: %w(Started In\ Progress)).count > 0
                %li= link_to 'Current Invoice', invoice_payments_path(Invoice.where(:user_id => current_user.id).where(status: %w(Started In\ Progress)).last)
              - else
                %li= link_to 'Current Invoice', invoice_payments_path(Invoice.where(:user_id => current_user.id).order(:start_date).last)
        %ul.nav.navbar-nav.navbar-right
          - if current_user
            - if current_user.fullname == ''
              %li= link_to 'Welcome, ' + current_user.name, edit_user_path(current_user)
            - else
              %li= link_to 'Welcome, ' + current_user.fullname, edit_user_path(current_user)
            %li= link_to 'Edit Profile', edit_user_path(current_user)
          - if logged_in?
            %li= link_to 'Log Out', logout_path, method: :delete
          - else
            %li= link_to 'Log In', login_path

  - flash.each do |type, message|
    %div{ :class => "alert alert-#{type}" }
      %p{ :class => "ALERT-#{type}" }= message

  .main.container-fluid
    = yield